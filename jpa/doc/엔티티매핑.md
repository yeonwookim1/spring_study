엔티티 매핑



1. 객체와 테이블 매핑

   @Entity

   - @Entity가 붙은 클래스는 JPA과 관리
   - JPA 사용해서 테이블과 매핑할 클래스는 @Entity 필수
   - 기본 생성자 필수
   - final 클래스, enum, interface, inner클래스에 사용 불가
   - 저장할 필드에 final 사용 불가
   - 속성
     - JPA에서 사용할 엔티티 이름 지정
     - default : 클래스 이름

   @Table

   - 엔티티와 매핑할 테이블 지정




2.  데이터베이스 스키마 자동 생성
   - DDL을 애플리케이션 실행 시점에 자동 생성
   - 테이블 중심 -> 객체 중심
   - 개발 장비에서만 사용 권장(개발, 테스트 장비도 create, update는 권장하지 않음)
   - 개발 장비 : create 또는 update(alter 나감)
   - 테스트 장비 : update 또는 validate
   - 운영 장비 : validate 또는 none



3. 필드와 칼럼 매핑 : @Column
   - 조건을 줄 수 있음 (제약조건, 유니크조건 ex: unique, name,  type 등)

   - | 어노테이션       | 설명                                       |
     | ----------- | ---------------------------------------- |
     | @Column     | 칼럼 매핑<br />name : 필드와 매핑할 테이블의 칼럼 이름<br />updatable / insertable : 등록 변경 가능 여부(true/false)<br />nullable : null 값의 허용 여부(true/false)<br />unique : 한 칼럼에 유니크 조건을 걸 때 사용, table 어노테이션에 사용을 권장(칼럼에 사용시 이름이 랜덤한 값으로 생겨서 디버그 어려움)<br />columnDefinition : 데이터베이스의 칼럼정보를 직접 (ex : varchar(20))<br />length : 문자의 길이 제약 (string만)<br />precision/scale : BigDemical 타입에서 사용, precision 은 소수점, scale은 소수의 자릿수 |
     | @Temporal   | 날짜 타입 매핑<br />LocalTime, LocalDateTime을 사용할 때 생략 가능 |
     | @Enumerated | enum 타입 매핑<br />Ordinal / String : Ordinal은 순서이기 때문에 사용X, 추가 enum값이 생기면 index가 바뀌게 된다. |
     | @Lob        | BLOB, CLOB 매핑                            |
     | @Transient  | 특정필드를 칼럼에 매핑하지 않음(무시)                    |

   - ​








기본 키 매핑 : @Id

연관관계 매핑 : @ManyToOne @JoinColumn